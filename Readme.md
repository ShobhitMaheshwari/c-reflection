reflection in c++

code taken from http://stackoverflow.com/a/11748131